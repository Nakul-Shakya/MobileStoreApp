<!-- save as: apple-single.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Apple Store ‚Äî Single Page</title>
    <style>
      :root {
        --accent1: #0b84ff;
        --accent2: #34c759;
        --muted: #6b7280;
        --card: #ffffff;
        --bg: linear-gradient(135deg, #fffaf0, #f0f7ff);
        --whatsapp: #25d366;
        --shadow: 0 10px 30px rgba(2, 6, 23, 0.08);
        --radius: 14px;
      }
      * {
        box-sizing: border-box;
      }
      body {
        margin: 0;
        font-family: Inter, system-ui, Segoe UI, Roboto, Arial;
        background: var(--bg);
        color: #0f172a;
        -webkit-font-smoothing: antialiased;
      }

      /* Topbar */
      .topbar {
        position: sticky;
        top: 0;
        z-index: 40;
        backdrop-filter: blur(6px);
        background: linear-gradient(
          90deg,
          rgba(11, 132, 255, 0.95),
          rgba(52, 199, 89, 0.95)
        );
        padding: 14px 18px;
        display: flex;
        gap: 12px;
        align-items: center;
        justify-content: space-between;
        box-shadow: 0 6px 18px rgba(0, 0, 0, 0.08);
        color: #fff;
      }
      .brand {
        display: flex;
        gap: 10px;
        align-items: center;
        font-weight: 700;
        font-size: 18px;
      }
      .brand img {
        height: 36px;
        border-radius: 7px;
        background: #fff;
        padding: 4px;
      }
      .search-wrap {
        flex: 1;
        max-width: 820px;
        margin: 0 16px;
      }
      .search {
        width: 100%;
        padding: 10px 14px;
        border-radius: 999px;
        border: none;
        outline: none;
        font-size: 15px;
        box-shadow: 0 8px 24px rgba(16, 24, 40, 0.06);
      }

      /* Layout */
      .container {
        max-width: 1300px;
        margin: 20px auto;
        padding: 0 18px;
      }
      .meta {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 12px;
      }
      .meta h2 {
        margin: 0;
        font-size: 20px;
      }
      .count {
        color: var(--muted);
      }

      .grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
        gap: 18px;
      }

      .card {
        background: var(--card);
        border-radius: 12px;
        padding: 14px;
        box-shadow: var(--shadow);
        transition: transform 0.18s, box-shadow 0.18s;
        cursor: pointer;
        display: flex;
        gap: 12px;
        align-items: flex-start;
      }
      .card:hover {
        transform: translateY(-6px);
        box-shadow: 0 20px 40px rgba(2, 6, 23, 0.12);
      }
      .thumb {
        width: 110px;
        height: 110px;
        border-radius: 10px;
        overflow: hidden;
        background: #f8fafc;
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .thumb img {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }

      .info {
        flex: 1;
      }
      .title {
        font-weight: 700;
        margin-bottom: 6px;
        font-size: 15px;
      }
      .rating {
        color: #f59e0b;
        font-weight: 700;
        font-size: 13px;
      }
      .price-row {
        display: flex;
        gap: 8px;
        align-items: center;
        margin-top: 6px;
      }
      .price-now {
        color: #ef4444;
        font-weight: 800;
        font-size: 16px;
      }
      .price-old {
        color: var(--muted);
        text-decoration: line-through;
        font-size: 13px;
      }
      .chip {
        background: #f3f4f6;
        color: #374151;
        padding: 6px 8px;
        border-radius: 8px;
        font-size: 12px;
        margin-top: 8px;
        display: inline-block;
      }

      /* modal */
      .modal {
        display: none;
        position: fixed;
        inset: 0;
        z-index: 80;
        background: rgba(2, 6, 23, 0.45);
        backdrop-filter: blur(6px);
        align-items: center;
        justify-content: center;
        padding: 20px;
      }
      .modal.open {
        display: flex;
      }
      .modal-card {
        width: 100%;
        max-width: 920px;
        background: #fff;
        border-radius: 12px;
        box-shadow: 0 30px 80px rgba(2, 6, 23, 0.2);
        overflow: hidden;
        display: grid;
        grid-template-columns: 420px 1fr;
      }
      .modal-left {
        background: #f8fafc;
        padding: 18px;
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .modal-left img {
        width: 100%;
        height: 100%;
        object-fit: contain;
        border-radius: 10px;
      }
      .modal-right {
        padding: 20px 22px;
        position: relative;
      }
      .close-x {
        position: absolute;
        right: 14px;
        top: 10px;
        font-size: 20px;
        cursor: pointer;
        color: #374151;
      }
      .modal-right h3 {
        margin: 0 0 6px;
        font-size: 20px;
      }
      .specs-list {
        margin-top: 12px;
        color: #334155;
      }

      .modal-price {
        margin-top: 10px;
        font-weight: 800;
        font-size: 20px;
        color: #ef4444;
      }
      .modal-actions {
        margin-top: 18px;
        display: flex;
        gap: 12px;
        flex-wrap: wrap;
      }
      .btn {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 10px 14px;
        border-radius: 10px;
        font-weight: 700;
        text-decoration: none;
        color: #fff;
      }
      .btn-wh {
        background: var(--whatsapp);
        color: #04311a;
      }
      .btn-call {
        background: #0ea5e9;
      }
      .btn-map {
        background: #ff7b00;
      }

      /* responsive */
      @media (max-width: 980px) {
        .modal-card {
          grid-template-columns: 1fr;
          max-height: 92vh;
          overflow: auto;
        }
        .modal-left {
          padding: 12px;
        }
        .thumb {
          width: 100px;
          height: 100px;
        }
      }
      @media (max-width: 520px) {
        .search {
          padding: 10px;
        }
        .card {
          gap: 10px;
        }
      }

      /* floating whatsapp quick */
      .wh-quick {
        position: fixed;
        right: 18px;
        bottom: 18px;
        width: 56px;
        height: 56px;
        border-radius: 50%;
        background: var(--whatsapp);
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 18px 40px rgba(2, 6, 23, 0.18);
        z-index: 90;
      }
      .wh-quick img {
        width: 28px;
      }
    </style>
  </head>
  <body>
    <div class="topbar">
      <div class="brand">
        <img src=images/logo.png alt="logo"> My Mobile Store (Apple)
      </div>

      <div class="search-wrap">
        <input
          id="search"
          class="search"
          placeholder="Search iPhone, e.g. iPhone 15 Pro, 14, 13..."
        />
      </div>

      <div style="color: rgba(255, 255, 255, 0.95)">
        Call:
        <a
          href="tel:+911234567890"
          style="color: inherit; text-decoration: underline"
          >+91 12345 67890</a
        >
      </div>
    </div>

    <main class="container">
      <div class="meta">
        <h2>Apple iPhones</h2>
        <div class="count" id="count">0 items</div>
      </div>

      <div id="grid" class="grid">
        <!-- JS will render cards here -->
      </div>
    </main>

    <!-- Modal -->
    <div id="modal" class="modal" aria-hidden="true">
      <div class="modal-card" role="dialog" aria-modal="true">
        <div class="modal-left">
          <img id="mImg" src="" alt="product image" />
        </div>
        <div class="modal-right">
          <div class="close-x" id="close">‚úï</div>
          <h3 id="mTitle">Product</h3>
          <div class="modal-price" id="mPrice"></div>
          <div style="margin-top: 8px" id="mBadges"></div>
          <div class="specs-list">
            <ul id="mSpecs"></ul>
          </div>

          <div class="modal-actions">
            <div class="modal-actions" style="margin-top: 14px">
              <a id="btnWhats" class="btn btn-wh" target="_blank" rel="noopener"
                >üí¨ WhatsApp</a
              >
              <a id="btnCall" class="btn btn-call" href="tel:+911234567890"
                >üìû Call</a
              >
              <a id="btnMap" class="btn btn-map" target="_blank" rel="noopener"
                >üìç Location</a
              >
            </div>
          </div>
        </div>
      </div>
    </div>

    <a
      class="wh-quick"
      href="https://wa.me/911234567890"
      target="_blank"
      title="Chat on WhatsApp"
    >
      <img
        src="https://upload.wikimedia.org/wikipedia/commons/thumb/6/6b/WhatsApp.svg/1022px-WhatsApp.svg.png"
        alt="wh"
      />
    </a>

    <script>
            // This will come from your backend (EJS will inject it)
            const products = <%- JSON.stringify(products) %>;

            const grid = document.getElementById('grid');
            const countEl = document.getElementById('count');
            const search = document.getElementById('search');

            const modal = document.getElementById('modal');
            const mImg = document.getElementById('mImg');
            const mTitle = document.getElementById('mTitle');
            const mPrice = document.getElementById('mPrice');
            const mSpecs = document.getElementById('mSpecs');
            const mBadges = document.getElementById('mBadges');
            const closeBtn = document.getElementById('close');
            const btnWhats = document.getElementById('btnWhats');
            const btnCall = document.getElementById('btnCall');
            const btnMap = document.getElementById('btnMap');

            function render(items) {
              grid.innerHTML = '';
              if (!items.length) {
                grid.innerHTML = '<div style="padding:30px;background:#fff;border-radius:10px;box-shadow:var(--shadow)">No results</div>';
              }
              items.forEach(p => {
                const el = document.createElement('div');
                el.className = 'card';
                el.tabIndex = 0;
        el.innerHTML = `
          <div class="thumb">
            <img src="/images/${p.image}" alt="${p.name}">
          </div>
        <div class="info">
          <div class="title">${p.name}</div>
          <div class="rating">‚≠ê ${p.rating ?? '4.5'} &nbsp; <span style="color:var(--muted)">(${Math.floor(Math.random()*2000)+50})</span></div>
          <div class="price-row">
            <div class="price-now">‚Çπ${p.price}</div>
          </div>
          <div class="chip">${p.description}</div>
        </div>
      `;

                el.addEventListener('click', () => openModal(p));
                grid.appendChild(el);
              });
              countEl.textContent = items.length + ' items';
            }

            function openModal(p) {
              mImg.src = `/uploads/${p.image}`;
              mTitle.textContent = p.name;
              mPrice.textContent = `‚Çπ${p.price}`;
              mSpecs.innerHTML = `<li>${p.description}</li>`;
              mBadges.innerHTML = `<div style="margin-top:8px"><span class="chip">Brand: ${p.brand}</span></div>`;

              const wa = encodeURIComponent(`Hi, I'm interested in ${p.name}. Please share price & availability.`);
              btnWhats.href = `https://wa.me/911234567890?text=${wa}`;
              btnCall.href = `tel:+911234567890`;
              btnMap.href = `https://maps.google.com/?q=Your+Store+Location`;

              modal.classList.add('open');
              modal.setAttribute('aria-hidden', 'false');
            }

            function closeModal() {
              modal.classList.remove('open');
              modal.setAttribute('aria-hidden', 'true');
            }

            closeBtn.addEventListener('click', closeModal);
            modal.addEventListener('click', (e) => { if (e.target === modal) closeModal(); });
            document.addEventListener('keydown', (e) => { if (e.key === 'Escape') closeModal(); });

            // Search filter
            search.addEventListener('input', () => {
              const q = search.value.trim().toLowerCase();
              const filt = products.filter(p => (p.name + ' ' + p.description).toLowerCase().includes(q));
              render(filt);
            });

            // Initial render
            render(products);
    </script>
  </body>
</html>
